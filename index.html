<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>数学研究部 | Math Club</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: white;
      font-family: sans-serif;
      color: black;
    }

    #content {
      position: absolute;
      z-index: 2;
      top: 20px;
      left: 20px;
    }

    .equation {
      position: absolute;
      font-size: 28px;
      opacity: 0.4;
      z-index: 1;
      color: black;
    }
  </style>

  <!-- MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
  <div id="content">
    <h1>数学研究部</h1>
    <p>Welcome to the Math Club!</p>
  </div>

  <!-- 背景数式 -->
  <div class="equation" style="top: 30%; left: 20%;">
    \[\frac{\partial^2 u}{\partial t^2} = c^2 \frac{\partial^2 u}{\partial x^2}\]
  </div>
  <div class="equation" style="top: 55%; left: 60%;">
    \[e^{i\pi} + 1 = 0\]
  </div>
  <div class="equation" style="top: 75%; left: 10%;">
    \[\lim_{n \to \infty} \left(1 + \frac{1}{n}\right)^n = e\]
  </div>

  <!-- 幾何学模様 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script>
    let circles = [];
    let polygons = [];

    function setup() {
      createCanvas(windowWidth, windowHeight);
      angleMode(DEGREES);
      noStroke();

      // 円の設定（球が回転）
      for (let i = 0; i < 3; i++) {
        circles.push({
          x: random(150, width - 150),
          y: random(150, height - 150),
          r: random(60, 100),
          angle: random(360),
          speed: random(0.5, 1.2)
        });
      }

      // 正三角形～正六角形（辺をなぞる球）
      for (let sides = 3; sides <= 6; sides++) {
        polygons.push(new PolygonWalker(
          random(150, width - 150),
          random(150, height - 150),
          random(60, 90),
          sides,
          random(1, 2)
        ));
      }
    }
function draw() {
  background(255);

  // 円と球
  fill(0, 20);
  noStroke();
  for (let c of circles) {
    ellipse(c.x, c.y, c.r * 2);
  }

  fill(0);
  for (let c of circles) {
    let bx = c.x + cos(c.angle) * c.r;
    let by = c.y + sin(c.angle) * c.r;
    ellipse(bx, by, 10, 10);
    c.angle += c.speed;
  }

  // 多角形と球
  stroke(0, 60);
  noFill(); // ←ここで多角形を透明に
  for (let p of polygons) {
    p.update();
    p.draw();
  }
}

// --- 正多角形ウォーカー ---
class PolygonWalker {
  constructor(x, y, r, sides, speed) {
    this.x = x;
    this.y = y;
    this.r = r;
    this.sides = sides;
    this.speed = speed;
    this.points = [];

    for (let i = 0; i < sides; i++) {
      let angle = 360 / sides * i - 90;
      let px = this.x + cos(angle) * r;
      let py = this.y + sin(angle) * r;
      this.points.push(createVector(px, py));
    }

    this.currentEdge = 0;
    this.t = 0;
  }

  update() {
    this.t += this.speed * 0.01;
    if (this.t >= 1) {
      this.t = 0;
      this.currentEdge = (this.currentEdge + 1) % this.sides;
    }
  }

  draw() {
    noFill(); // 多角形は塗りなしで
    beginShape();
    for (let pt of this.points) {
      vertex(pt.x, pt.y);
    }
    endShape(CLOSE);

    // 線上を移動する球だけ塗りつぶし
    let a = this.points[this.currentEdge];
    let b = this.points[(this.currentEdge + 1) % this.sides];
    let bx = lerp(a.x, b.x, this.t);
    let by = lerp(a.y, b.y, this.t);

    fill(0);
    ellipse(bx, by, 10, 10);
  }
}
   
  </script>
</body>
</html>
