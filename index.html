<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>数学研究部 | Math Club</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: white;
      overflow-x: hidden;
    }

    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #111;
      color: white;
      padding: 12px 24px;
      z-index: 999;
      font-size: 18px;
      display: flex;
      gap: 20px;
    }

    nav a {
      color: white;
      text-decoration: none;
    }

    body {
      padding-top: 70px;
    }

    #content {
      position: relative;
      z-index: 1;
      background: transparent;
      padding: 40px;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="schedule.html">Schedule</a>
    <a href="contact.html">Contact</a>
    <a href="qa.html">Q&A</a>
  </nav>

  <div id="content">
    <h1>数学研究部</h1>
    <p>Welcome to the Math Club!</p>
  </div>

  <!-- 三角タイル背景 -->
  <script>
    new p5(p => {
      let triangles = [];
      let walkers = [];
      const sideLength = 60;
      const walkerCount = 12;

      p.setup = () => {
        const height = document.documentElement.scrollHeight;
        let cnv = p.createCanvas(p.windowWidth, height);
        cnv.position(0, 0);
        cnv.style('z-index', '-4');
        p.noFill();
        p.stroke(0, 30);
        generateTriangleGrid();
        for (let i = 0; i < walkerCount; i++) {
          walkers.push(new Walker(p.random(triangles)));
        }
      };

      p.draw = () => {
        p.clear();
        for (let t of triangles) {
          p.beginShape();
          for (let pt of t) {
            p.vertex(pt.x, pt.y);
          }
          p.endShape(p.CLOSE);
        }

        for (let w of walkers) {
          w.update();
          w.display();
        }
      };

      function generateTriangleGrid() {
        const h = sideLength * Math.sqrt(3) / 2;
        for (let y = 0; y < p.height + h; y += h) {
          for (let x = 0; x < p.width + sideLength; x += sideLength) {
            let xOffset = (Math.floor(y / h) % 2) * (sideLength / 2);
            let p1 = p.createVector(x + xOffset, y);
            let p2 = p.createVector(x + sideLength / 2 + xOffset, y + h);
            let p3 = p.createVector(x - sideLength / 2 + xOffset, y + h);
            triangles.push([p1, p2, p3]);
          }
        }
      }

      class Walker {
        constructor(triangle) {
          this.triangle = triangle;
          this.edge = Math.floor(p.random(3));
          this.t = p.random();
          this.speed = p.random(0.002, 0.01);
        }

        update() {
          this.t += this.speed;
          if (this.t > 1) {
            this.t = 0;
            this.edge = Math.floor(p.random(3));
          }
        }

        display() {
          const a = this.triangle[this.edge];
          const b = this.triangle[(this.edge + 1) % 3];
          const x = p.lerp(a.x, b.x, this.t);
          const y = p.lerp(a.y, b.y, this.t);
          p.noStroke();
          p.fill(0);
          p.ellipse(x, y, 6, 6);
        }
      }

      p.windowResized = () => {
        const height = document.documentElement.scrollHeight;
        p.resizeCanvas(p.windowWidth, height);
      };
    });
  </script>
</body>
</html>
