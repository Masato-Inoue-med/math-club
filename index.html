<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>数学研究部 | Math Club</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: white;
      overflow: hidden;
    }

    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #111;
      color: white;
      padding: 12px 24px;
      z-index: 999;
      font-size: 18px;
      display: flex;
      gap: 20px;
    }
    nav a {
      color: white;
      text-decoration: none;
    }

    body {
      padding-top: 70px;
    }

    .banner {
      background-color: rgba(255, 255, 255, 0.8);
      border: 2px solid #0077cc;
      padding: 24px;
      max-width: 800px;
      margin: 40px auto;
      border-radius: 12px;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }

    .banner a {
      color: #0077cc;
      font-weight: bold;
      text-decoration: none;
    }

    #content {
      position: relative;
      z-index: 2;
      color: #111;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="schedule.html">Schedule</a>
    <a href="contact.html">Contact</a>
    <a href="qa.html">Q&A</a>
  </nav>

  <div id="content">
    <h1 style="margin: 40px 20px 10px;">数学研究部</h1>
    <p style="margin: 0 20px;">Welcome to the Math Club!</p>

    <div class="banner">
      <h2>トリアス祭 企画のお知らせ</h2>
      <p>京都府立医科大学のトリアス祭にて、<strong>入試形式の模試</strong>を実施いたします。</p>
      <p>昨年度の問題冊子も販売予定です。ぜひご参加ください。</p>
      <p><a href="https://trias.link" target="_blank">トリアス祭 公式サイトはこちら</a></p>
    </div>
  </div>

<!-- 2D 幾何学模様スケッチ -->
<script>
  new p5(p => {
    let circles = [];
    let polygons = [];

    p.setup = () => {
      let cnv = p.createCanvas(p.windowWidth, p.windowHeight);
      cnv.style('z-index', '-2');
      cnv.position(0, 0);
      p.angleMode(p.DEGREES);

      for (let i = 0; i < 3; i++) {
        circles.push({
          x: p.random(150, p.width - 150),
          y: p.random(150, p.height - 150),
          r: p.random(60, 100),
          angle: p.random(360),
          speed: p.random(0.5, 1.2)
        });
      }

      for (let sides = 3; sides <= 6; sides++) {
        polygons.push(new PolygonWalker(
          p.random(150, p.width - 150),
          p.random(150, p.height - 150),
          p.random(60, 90),
          sides,
          p.random(1, 2)
        ));
      }
    };

    p.draw = () => {
      p.clear();

      p.fill(0, 20);
      p.noStroke();
      for (let c of circles) {
        p.ellipse(c.x, c.y, c.r * 2);
      }

      p.fill(0);
      for (let c of circles) {
        let bx = c.x + p.cos(c.angle) * c.r;
        let by = c.y + p.sin(c.angle) * c.r;
        p.ellipse(bx, by, 10, 10);
        c.angle += c.speed;
      }

      p.noFill(); // 塗りつぶしなしに修正
      p.stroke(0, 60);
      for (let poly of polygons) {
        poly.update();
        poly.draw(p);
      }
    };

    class PolygonWalker {
      constructor(x, y, r, sides, speed) {
        this.x = x;
        this.y = y;
        this.r = r;
        this.sides = sides;
        this.speed = speed;
        this.points = [];

        for (let i = 0; i < sides; i++) {
          let angle = 360 / sides * i - 90;
          let px = this.x + p.cos(angle) * r;
          let py = this.y + p.sin(angle) * r;
          this.points.push(p.createVector(px, py));
        }

        this.currentEdge = 0;
        this.t = 0;
      }

      update() {
        this.t += this.speed * 0.01;
        if (this.t >= 1) {
          this.t = 0;
          this.currentEdge = (this.currentEdge + 1) % this.sides;
        }
      }

      draw(p) {
        p.beginShape();
        for (let pt of this.points) {
          p.vertex(pt.x, pt.y);
        }
        p.endShape(p.CLOSE);

        let a = this.points[this.currentEdge];
        let b = this.points[(this.currentEdge + 1) % this.sides];
        let bx = p.lerp(a.x, b.x, this.t);
        let by = p.lerp(a.y, b.y, this.t);
        p.fill(0);
        p.ellipse(bx, by, 10, 10);
      }
    }
  });
</script>

<!-- 3D 正二十面体スケッチ -->
<script>
  new p5(p => {
    let angleX = 0;
    let angleY = 0;
    let lastMouseX, lastMouseY;
    let dragging = false;
    let vertices = [];
    let faces = [];

    p.setup = () => {
      let cnv = p.createCanvas(p.windowWidth, p.windowHeight, p.WEBGL);
      cnv.style('z-index', '-3');
      cnv.position(0, 0);
      p.noFill();
      p.stroke(0);
      p.strokeWeight(1.5);
      setupIcosahedron();
    };

    p.draw = () => {
      p.clear();
      p.rotateX(angleX);
      p.rotateY(angleY);

      for (let face of faces) {
        p.beginShape();
        for (let i of face) {
          let v = vertices[i];
          p.vertex(v[0] * 150, v[1] * 150, v[2] * 150);
        }
        p.endShape(p.CLOSE);
      }
    };

    p.mousePressed = () => {
      lastMouseX = p.mouseX;
      lastMouseY = p.mouseY;
      dragging = true;
    };

    p.mouseDragged = () => {
      if (dragging) {
        let dx = p.mouseX - lastMouseX;
        let dy = p.mouseY - lastMouseY;
        angleY += dx * 0.01;
        angleX += dy * 0.01;
        lastMouseX = p.mouseX;
        lastMouseY = p.mouseY;
      }
    };

    p.mouseReleased = () => {
      dragging = false;
    };

    function setupIcosahedron() {
      const phi = (1 + Math.sqrt(5)) / 2;
      const a = 1;
      const b = 1 / phi;
      vertices = [
        [-a, b, 0], [a, b, 0], [-a, -b, 0], [a, -b, 0],
        [0, -a, b], [0, a, b], [0, -a, -b], [0, a, -b],
        [b, 0, -a], [b, 0, a], [-b, 0, -a], [-b, 0, a]
      ];
      faces = [
        [0, 11, 5], [0, 5, 1], [0, 1, 7], [0, 7, 10], [0, 10, 11],
        [1, 5, 9], [5, 11, 4], [11, 10, 2], [10, 7, 6], [7, 1, 8],
        [3, 9, 4], [3, 4, 2], [3, 2, 6], [3, 6, 8], [3, 8, 9],
        [4, 9, 5], [2, 4, 11], [6, 2, 10], [8, 6, 7], [9, 8, 1]
      ];
    }
  });
</script>
</body>
</html>
